"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.routerStaff = void 0;
const express_1 = require("express");
const helpers_1 = require("../helpers");
const middlewares_1 = require("../middlewares");
const staff_validation_1 = require("../helpers/staff-validation");
const controllers_1 = require("../controllers");
const staff_1 = require("../controllers/staff");
const limiter_middleware_1 = require("../middlewares/limiter.middleware");
const middlewares_2 = require("../middlewares/");
exports.routerStaff = (0, express_1.Router)();
exports.routerStaff.post(`/register-staff`, middlewares_1.validateJWT, (0, staff_validation_1.staffValidator)(), helpers_1.verifyError, middlewares_2.typeStaffMiddleware.typeIdCardValidator, helpers_1.verifyError, middlewares_2.institutionStaffMiddleware.existStaffAtTheInstitution, helpers_1.verifyError, controllers_1.staffController.registerStaff);
exports.routerStaff.patch(`/update-staff/:id_card`, middlewares_1.validateJWT, (0, staff_validation_1.idCardValidator)(), helpers_1.verifyError, controllers_1.staffController.updateStaff);
exports.routerStaff.post(`/search-api-id-card`, middlewares_1.validateJWT, (0, staff_validation_1.idCardValidatorAPI)(), helpers_1.verifyError, controllers_1.staffController.searchDNIAPI);
exports.routerStaff.get(`/get-list-staff`, middlewares_1.validateJWT, (0, helpers_1.modularCodeValidator)(), helpers_1.verifyError, controllers_1.staffController.getListStaff);
exports.routerStaff.post(`/get-one-staff-with-institutions`, (0, limiter_middleware_1.limiter)(5), (0, staff_validation_1.idCardValidator)(), helpers_1.verifyError, middlewares_2.typeStaffMiddleware.typeIdCardValidator, helpers_1.verifyError, staff_1.getOneStaffWithInstitutions);
exports.routerStaff.get(`/get-one-staff/:id_card`, middlewares_1.validateJWT, (0, staff_validation_1.idCardValidator)(), helpers_1.verifyError, controllers_1.staffController.getOneStaff);
exports.routerStaff.post(`/get-one-staff-with-attendance`, middlewares_1.validateJWT, middlewares_1.haveRole, (0, staff_validation_1.attendanceOnePersonalValidator)(), helpers_1.verifyError, controllers_1.staffController.getOneStaffWithAttendance);
//# sourceMappingURL=staff.route.js.map